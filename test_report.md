# ADK Bidirectional Streaming Test Report

## Test Summary
- **Test Date**: 2025-10-17 10:31:48
- **Test Type**: COMBINED (Text + Voice)
- **Google ADK Version**: 1.16.0
- **Total Tests**: 18
- **Passed Tests**: 18
- **Failed Tests**: 0
- **Success Rate**: 100.0%

### Test Type Breakdown
- **Text Tests**: 9/9 passed (100.0%)
- **Voice Tests**: 9/9 passed (100.0%)

### Retry Statistics
- **Tests requiring retries**: 0/18
- **Total retry attempts**: 0

## Environment Configuration
- **Google Cloud Project**: gcp-samples-ic0
- **Google Cloud Location**: us-central1

## Detailed Results

### Google AI Studio

**gemini-2.0-flash-exp**:
  - Text: ✅ PASS
  - Voice: ✅ PASS

**gemini-2.0-flash-live-001**:
  - Text: ✅ PASS
  - Voice: ✅ PASS

**gemini-live-2.5-flash-preview**:
  - Text: ✅ PASS
  - Voice: ✅ PASS

**gemini-2.5-flash-native-audio-preview-09-2025**:
  - Text (audio transcript): ✅ PASS
  - Voice: ✅ PASS

**gemini-2.5-flash-preview-native-audio-dialog**:
  - Text (audio transcript): ✅ PASS
  - Voice: ✅ PASS

**gemini-2.5-flash-exp-native-audio-thinking-dialog**:
  - Text (audio transcript): ✅ PASS
  - Voice: ✅ PASS


### Vertex AI

**gemini-2.0-flash-exp**:
  - Text: ✅ PASS
  - Voice: ✅ PASS

**gemini-live-2.5-flash-preview-native-audio**:
  - Text (audio transcript): ✅ PASS
  - Voice: ✅ PASS

**gemini-live-2.5-flash-preview-native-audio-09-17**:
  - Text (audio transcript): ✅ PASS
  - Voice: ✅ PASS


## Voice Transcription Results

### Google AI Studio

**gemini-2.0-flash-exp**: "it is 10:27 a.m. in Tokyo Japan"

**gemini-2.0-flash-live-001**: "it is 10:28 a.m. in Tokyo Japan"

**gemini-live-2.5-flash-preview**: "the current time in Tokyo Japan is 10:28 a.m. on Friday October 17 2025 Tokyo observes Japan Standard time jst which is UTC GMT + 9 hours Tokyo does not observe Daylight Saving Time"

**gemini-2.5-flash-native-audio-preview-09-2025**: "the current time in Tokyo Japan is 10:29 a.m."

**gemini-2.5-flash-preview-native-audio-dialog**: "the current time in Tokyo Japan is 10:29 a.m. Tokyo is in the Asia Tokyo time zone"

**gemini-2.5-flash-exp-native-audio-thinking-dialog**: "the current time in Tokyo is 10:30 a.m."

### Vertex AI

**gemini-2.0-flash-exp**: "it is 10:30 a.m. in Tokyo Japan"

**gemini-live-2.5-flash-preview-native-audio**: "the current time in Tokyo Japan is 10:31 a.m. Tokyo is in the Asia Tokyo time zone and does not observe Daylight Saving Time"

**gemini-live-2.5-flash-preview-native-audio-09-17**: "it's 10:31 a.m. in Tokyo Japan now"

## Test Methodology

### Test Question
- **Query**: "What time is it now?"
- **Expected Response**: Agent responds with current time information using Google Search tool

### Success Criteria
- Response contains time-related keywords (time, clock, hour, minute, am, pm, utc, gmt)
- Agent successfully uses Google Search tool for real-time information
- Bidirectional streaming communication works correctly

### Retry Logic
- Each test is automatically retried up to 3 times if it fails
- A 2-second delay is applied between retry attempts
- Tests succeed on first attempt show 0 retries
- Failed tests show the number of retry attempts made

### Platform Configuration
- **Google AI Studio**: Uses GOOGLE_API_KEY with GOOGLE_GENAI_USE_VERTEXAI=FALSE
- **Vertex AI**: Uses GOOGLE_CLOUD_PROJECT and GOOGLE_CLOUD_LOCATION with GOOGLE_GENAI_USE_VERTEXAI=TRUE

### Text Chat Testing
- Sends text query via ADK streaming API
- Receives streaming text response
- Validates response content for time information

### Voice Chat Testing
- Uses M4A audio file containing "What time is it now?"
- Converts to 16kHz, mono, 16-bit PCM format
- Sends audio to ADK streaming API in 1KB chunks
- Receives audio response from model at 24kHz
- Plays audio response using PyAudio
- Transcribes response using Google Cloud Speech-to-Text for validation

## Environment Information
- **ADK Version**: 1.16.0
- **Python Dependencies**: google-adk, google-cloud-speech, pyaudio, pydub, python-dotenv
- **Audio Configuration**: Input 16kHz, Output 24kHz, PCM, Mono
- **SSL Configuration**: Automatically configured using certifi

## Test Tool Usage
```bash
# Run all tests (combined text and voice)
python test_tool.py

# Test specific platform only
python test_tool.py --platform google-ai-studio

# Test specific model
python test_tool.py --platform vertex-ai --model gemini-2.0-flash-exp

# Test with specific region
python test_tool.py --platform vertex-ai --region us-west1

# Test specific model in specific region
python test_tool.py --platform vertex-ai --model gemini-2.0-flash-exp --region europe-west1
```

---
*Report generated by ADK Bidirectional Streaming Test Tool*
